syntax = "proto3";

package reservations;

import "common.proto";

service ReservationsService {
  rpc GetReservations(GetReservationsRequest) returns (GetReservationsResponse);
  rpc CreateReservation(CreateReservationRequest) returns (Reservation);
  rpc DeleteReservation(common.DeleteEntityRequest) returns (common.Empty);
}

enum ReservationStatus {
  CONFIRMED = 0;
  CANCELLED = 1;
}

message Reservation {
  int32 id = 1;
  string user_id = 2;
  string reservation_date = 3; // ISO date string
  ReservationStatus status = 4;
  optional string created_at = 5; // ISO datetime string
  optional string updated_at = 6; // ISO datetime string
  repeated ReservationSlot reservation_slots = 7;
}

message ReservationSlot {
  int32 reservation_id = 1;
  int32 slot_id = 2;
}

message CreateReservationRequest {
  string reservation_date = 2; // ISO date string
  repeated int32 slot_ids = 3;
}

message GetReservationsRequest {
  optional common.PaginationRequest pagination = 1;
  optional string user_id = 2;
  optional string reservation_date = 3;
  optional ReservationStatus status = 4;
}

message GetReservationsResponse {
  repeated Reservation items = 1;
  int32 total = 2;
}